<!DOCTYPE html>
<html>
<head>
    <title>Node-RED WebSocket Actions</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="all">
        <h3>マイコンへ邪魔する</h3>
        <div class="buttons-container">
            <button class="button" id="vibrateButton">バイブ</button>
        </div>
        <h3>Meta Questへ邪魔する</h3>
        <div class="buttons-container">
            <button class="button" id="displayImageButton1">チャッキー</button>
            <button class="button" id="displayImageButton2">お化け</button>
            <button class="button" id="displayImageButton3">音1</button>
            <button class="button" id="displayImageButton4">音2</button>
            <button class="button" id="displayImageButton5">音3</button>
        </div>
    </div>


    <script>
        // WebSocket接続の初期化
        var ws = new WebSocket('ws://nodered-sandbox.cps.private:1880/ws/Web');

        ws.onopen = function() {
            console.log('WebSocket connected');
        };

        ws.onerror = function(error) {
            console.error('WebSocket Error ' + error);
        };

        // バイブレーションボタンのイベントハンドラ
        document.getElementById('vibrateButton').addEventListener('click', function() {
            var jsonMessage = JSON.stringify({ "buttonState": "on" });
            ws.send(jsonMessage);
        });

        // 画像表示ボタンのイベントハンドラ
        // チャッキー
        document.getElementById('displayImageButton1').addEventListener('click', function() {
            var jsonMessage = JSON.stringify({ "HeaderNumber": 3, "Number": 1 });
            ws.send(jsonMessage);
        });
        // お化け
        document.getElementById('displayImageButton2').addEventListener('click', function() {
            var jsonMessage = JSON.stringify({ "HeaderNumber": 3, "Number": 2 });
            ws.send(jsonMessage);
        });
        // 音１
        document.getElementById('displayImageButton3').addEventListener('click', function() {
            var jsonMessage = JSON.stringify({ "HeaderNumber": 3, "Number": 3 });
            ws.send(jsonMessage);
        });
        // 音２
        document.getElementById('displayImageButton4').addEventListener('click', function() {
            var jsonMessage = JSON.stringify({ "HeaderNumber": 3, "Number": 4 });
            ws.send(jsonMessage);
        });
        // 音３
        document.getElementById('displayImageButton5').addEventListener('click', function() {
            var jsonMessage = JSON.stringify({ "HeaderNumber": 3, "Number": 5 });
            ws.send(jsonMessage);
        });
    </script>
</body>
</html>
